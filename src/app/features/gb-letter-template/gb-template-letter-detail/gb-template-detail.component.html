<div *ngIf="letter; else noLetterFound" class="letter-detail">
  <h2>
    <input type="text" [(ngModel)]="letter.subject" (ngModelChange)="onInputChange()" placeholder="Subject">
  </h2>

  <div class="letter-section">
    <h3>Introduction</h3>
    <textarea [(ngModel)]="letter.introduction" (ngModelChange)="onInputChange()" placeholder="Introduction"></textarea>
  </div>

  <div class="letter-section">
    <h3>Reason for Goodbye</h3>
    <textarea [(ngModel)]="letter.reasonForGoodbye" (ngModelChange)="onInputChange()" placeholder="Reason for Goodbye"></textarea>
  </div>

  <div class="letter-section">
    <h3>Turning Point</h3>
    <textarea [(ngModel)]="letter.turningPoint" (ngModelChange)="onInputChange()" placeholder="Turning Point"></textarea>
  </div>

  <div class="letter-section">
    <h3>Steps for Change</h3>
    <ul *ngIf="letter.stepsForChange && letter.stepsForChange.length > 0; else notAvailable">
      <li *ngFor="let step of letter.stepsForChange; let i = index">
        <input type="text" [(ngModel)]="letter.stepsForChange[i]" (ngModelChange)="onInputChange()" placeholder="Step {{i + 1}}">
      </li>
    </ul>
  </div>

  <div class="letter-section">
    <h3>Future Aspirations</h3>
    <textarea [(ngModel)]="letter.futureAspirations" (ngModelChange)="onInputChange()" placeholder="Future Aspirations"></textarea>
  </div>

  <div class="letter-section">
    <h3>Affirmation</h3>
    <textarea [(ngModel)]="letter.affirmation" (ngModelChange)="onInputChange()" placeholder="Affirmation"></textarea>
  </div>

  <div class="letter-section">
    <h3>Conclusion</h3>
    <textarea [(ngModel)]="letter.conclusion" (ngModelChange)="onInputChange()" placeholder="Conclusion"></textarea>
  </div>

  <div class="letter-section">
    <h3>Signature</h3>
    <input type="text" [(ngModel)]="letter.signature" (ngModelChange)="onInputChange()" placeholder="Signature">
  </div>

  <!-- Conditionally display the Save button -->
  <button *ngIf="isChanged" (click)="saveChanges()">Save</button>

  <div class="letter-meta">
    <p><strong>Draft:</strong> {{ letter.draft ? 'Yes' : 'No' }}</p>
    <p><strong>User ID:</strong> {{ letter.userId }}</p>
  </div>
</div>
<button (click)="deleteLetter()">Delete</button>

<ng-template #noLetterFound>
  <div class="no-letter">
    <p>No letter found. Please select a letter to view its details.</p>
  </div>
</ng-template>

<ng-template #notAvailable>
  <p>Not available</p>
</ng-template>
<h5>Basic</h5>
